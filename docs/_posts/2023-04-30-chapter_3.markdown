---
layout: post
title:  "Chapter 3: Are we there yet? Install xenomai on rPi"
date:   2023-04-30 10:03:00 +0300
categories: rPi
---
# [Documentation](https://source.denx.de/Xenomai/xenomai/-/wikis/Installing_Xenomai_3)
### 1. Download Xenomai v3.2.1
```
wget https://source.denx.de/Xenomai/xenomai/-/archive/v3.2.1/xenomai-v3.2.1.tar.bz2
```

### 2. Unzip xenomai
```
tar xjvf xenomai-v3.2.1.tar.bz2
```

### 3. Config and install xenomai
```
cd xenomai-v3.2.1
```

```
./scripts/bootstrap
```

```
./configure --with-core=cobalt --enable-smp
```

```
sudo make install
```

### 4. Some tweaks
```
sudo nano /boot/cmdline.txt
```
add to end of first line
```
dwc_otg.fiq_enable=0 dwc_otg.fiq_fsm_enable=0 dwc_otg.nak_holdoff=0 isolcpus=0,1 xenomai.supported_cpus=0x3
```

```
sudo nano /boot/config.txt
```
Add at the top
````
total_mem=3072
````

### 32bit
You will most likely get this error: Why? because FU that why!
Check this -> https://github.com/George117/rpi-kernel-compile/issues/7
![image](/docs/assets/images/3/32bit_fu_error.png)

### 64bit
Works as expected :)
![image](/docs/assets/images/3/64bit_latency_test.png)

